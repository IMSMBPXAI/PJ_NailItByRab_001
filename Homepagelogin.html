<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå (Auto Gen)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    <style> body { font-family: 'Prompt', sans-serif; } </style>
</head>
<<<<<<< HEAD:testt.html
<body class="  bg-slate-100 flex justify-center items-center min-h-screen text-slate-800">

    <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-sm text-center relative border border-slate-200">
        
        <h3 class="text-xl text-slate-500 font-medium mb-2">‡∏™‡πÅ‡∏Å‡∏ô‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</h3>
        <div class="text-4xl font-bold text-slate-800 mb-8">
            <span id="display-amount">00.00</span> 
            <span class="text-lg text-slate-500">THB</span>
        </div>
        
        <div class="relative mx-auto w-[200px] h-[200px] mb-6">
            <div id="qrcode" class="flex justify-center items-center w-full h-full"></div>
            
            <div id="expired-overlay" class="hidden absolute inset-0 bg-white/95 backdrop-blur-sm flex-col justify-center items-center z-10 rounded-lg">
                <div class="text-5xl mb-2">üö´</div>
                <div class="text-red-500 font-bold text-lg">QR Code ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏</div>
            </div>
        </div>

        <div class="bg-slate-50 p-4 rounded-xl border border-slate-100">
            <div class="text-sm text-slate-500 mb-1">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div>
            <div id="timer" class="text-2xl font-mono font-bold text-blue-600 tracking-wider">--:--</div>
        </div>

        <div class="mt-4 text-xs text-slate-400">
            ‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤: <span id="display-id">...</span>
        </div>

        <button id="btn-refresh" onclick="location.reload()" 
            class="hidden w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-xl transition-colors duration-200 shadow-lg shadow-blue-200">
            ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà
        </button>
    </div>

    <script>
        // ==========================================
        // 1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà (IMPORTANT)
        // ==========================================
        const config = {
            promptpayID: "0948263229", // ‡πÉ‡∏™‡πà‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠ ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ç‡∏µ‡∏î)
            amount: 100.00,            // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
            timeLimitSeconds: 15 * 60  // ‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
        };

        // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
        document.getElementById('display-amount').textContent = config.amount.toFixed(2);
        document.getElementById('display-id').textContent = formatPhoneNumber(config.promptpayID);

        // ==========================================
        // 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á PromptPay Payload (EMVCo)
        // ==========================================
        function generatePromptPay(id, amount) {
            const target = id.length >= 13 ? id : ("0066" + id.substring(1)); // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏ö‡∏≠‡∏£‡πå 08x ‡πÄ‡∏õ‡πá‡∏ô 668x
            const targetType = id.length >= 13 ? "02" : "01"; // 01=‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠, 02=‡∏ö‡∏±‡∏ï‡∏£ ‡∏õ‡∏ä‡∏ä.
            
            let data = [
                "000201",         // Payload Format Indicator
                "010211",         // Point of Initiation Method (12=Dynamic, 11=Static)
                "2937",           // Merchant Account Information
                "0016A000000677010111", // Application ID (PromptPay)
                targetType + (target.length < 10 ? "0" + target.length : target.length) + target,
                "5802TH",         // Country Code
                "5303764",        // Transaction Currency (THB)
                "54" + (amount.toFixed(2).length < 10 ? "0" + amount.toFixed(2).length : amount.toFixed(2).length) + amount.toFixed(2)
            ].join("");

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì CRC16 (Checksum)
            data += "6304"; 
            data += calcCRC16(data);
            return data;
        }

        function calcCRC16(str) {
            let crc = 0xFFFF;
            for (let i = 0; i < str.length; i++) {
                let x = ((crc >> 8) ^ str.charCodeAt(i)) & 0xFF;
                x ^= x >> 4;
                crc = ((crc << 8) ^ (x << 12) ^ (x << 5) ^ x) & 0xFFFF;
            }
            return ("0000" + crc.toString(16).toUpperCase()).slice(-4);
        }

        function formatPhoneNumber(phoneNumberString) {
            var cleaned = ('' + phoneNumberString).replace(/\D/g, '');
            var match = cleaned.match(/^(\d{3})(\d{3})(\d{4})$/);
            if (match) return match[1] + '-' + match[2] + '-' + match[3];
            return phoneNumberString;
        }

        // ==========================================
        // 3. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (Generate QR & Timer)
        // ==========================================
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á String ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PromptPay
        const payload = generatePromptPay(config.promptpayID, config.amount);
        console.log("Payload:", payload); // ‡∏î‡∏π‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Console ‡πÑ‡∏î‡πâ

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á QR Code
        new QRCode(document.getElementById("qrcode"), {
            text: payload,
            width: 200,
            height: 200,
            colorDark : "#1e293b",
            colorLight : "#ffffff",
            correctLevel : QRCode.CorrectLevel.H
        });

        // ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á
        let timeLeft = config.timeLimitSeconds;
        const timerDisplay = document.getElementById('timer');
        const overlay = document.getElementById('expired-overlay');
        const refreshBtn = document.getElementById('btn-refresh');

        const countdown = setInterval(() => {
            const minutes = Math.floor(timeLeft / 60);
            let seconds = timeLeft % 60;
            seconds = seconds < 10 ? '0' + seconds : seconds;
            timerDisplay.textContent = `${minutes}:${seconds}`;
            
            timeLeft--;

            if (timeLeft < 0) {
                clearInterval(countdown);
                timerDisplay.textContent = "00:00";
                timerDisplay.classList.add('text-red-500');
                overlay.classList.remove('hidden');
                overlay.classList.add('flex');
                refreshBtn.classList.remove('hidden');
            }
        }, 1000);
    </script>
=======
<body>
    mm‡∏¥‡∏¥‡∏¥‡πà‡∏≤‡∏∑‡πà‡∏¥‡πâ‡∏≠‡πÄ‡πâ
>>>>>>> e92407d24d3abe6d7fd612025d0aff6276d99da9:Homepagelogin.html
</body>
</html>